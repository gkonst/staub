<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:s="http://jboss.com/products/seam/taglib">
<ui:composition template="/template/staub-template.jspx">
<ui:param name="pageBean" value="#{questionDetailBean}"/>
<!--@elvariable id="pageBean" type="ru.spbspu.staub.bean.question.QuestionDetailBean"-->
<!--@elvariable id="messages" type="java.util.Map"-->
<ui:define name="sidebar">
    <ui:include src="/system/menuPage.jspx"/>
</ui:define>
<ui:define name="contentTitle">
    #{messages['question.detail.title']}
</ui:define>
<ui:define name="contentBody">
<a4j:form id="questionDetailForm">
<a4j:outputPanel id="contentButtons" styleClass="contentButtons">
    <ui:include src="/controls/genericSaveControl.jspx"/>
</a4j:outputPanel>

<div class="detailTable">
<table width="100%">
<tr>
    <td align="right">
        <strong>#{messages['question.detail.name']}</strong>
    </td>
    <td width="100%" colspan="3">
        <h:inputText value="#{pageBean.model.name }"
                     disabled="#{pageBean.viewMode}"
                     style="width:100%"/>
    </td>
</tr>
<tr>
    <td align="right">
        <strong>#{messages['question.detail.discipline.name']}</strong>
    </td>
    <td width="50%">
        <h:selectOneMenu value="#{pageBean.model.discipline}"
                         disabled="#{pageBean.viewMode}"
                         converter="ru.spbspu.staub.ObjectSelectConverter">
            <s:selectItems value="#{pageBean.disciplineList}" var="discipline"
                           label="#{discipline.name}"/>
        </h:selectOneMenu>
    </td>
    <td align="right">
        <strong>#{messages['question.detail.category.name']}</strong>
    </td>
    <td width="50%">
        <select>
            <option label="категория 1">категория 1</option>
        </select>
    </td>
</tr>
<tr>
    <td align="right">
        <strong>#{messages['question.detail.difficulty.name']}</strong>
    </td>
    <td width="100%" colspan="3">
        <select>
            <option label="сложность 1">сложность 1</option>
        </select>
    </td>
</tr>
<tr>
    <td colspan="4">
        <table class="innerDetailTable" cellpadding="0" cellspacing="0">
            <tr>
                <td align="left">
                    <strong>#{messages['question.detail.description']}</strong>
                </td>
                <td align="right">
                    Кнопари
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <h:inputTextarea value="#{pageBean.questionDefinition.description}"
                                     disabled="#{pageBean.viewMode}"
                                     style="width:100%; height:300px"/>
                </td>
            </tr>
        </table>
    </td>
</tr>
<tr>
    <td align="left">
        <strong>Варианты ответов</strong>
    </td>
    <td width="50%"/>
    <td align="right">
        <strong>Тип ответа</strong>
    </td>
    <td width="50%">
        <h:selectOneMenu id="answerTypesSelect"
                         value="#{pageBean.answerType}"
                         converter="ru.spbspu.staub.ObjectSelectConverter"
                         disabled="#{pageBean.viewMode}">
            <f:selectItems value="#{pageBean.answerTypes}"/>
            <a4j:support id="answerTypesSelectSupport"
                         event="onchange"
                         action="#{pageBean.changeAnswerType}"
                         reRender="correctAnswerPanel, answerLabelPanel"/>
        </h:selectOneMenu>
    </td>
</tr>
<tr>
    <td>
        <a4j:outputPanel id="correctAnswerPanel">
            <h:selectOneRadio id="correctAnswerSingleChoice"
                              layout="pageDirection"
                              rendered="#{pageBean.questionDefinition.singleChoice != null}"
                              converter="ru.spbspu.staub.ObjectSelectConverter"
                              value="#{pageBean.correctAnswer}"
                              disabled="#{pageBean.viewMode}">
                <s:selectItems value="#{pageBean.questionDefinition.singleChoice.answer}" var="temp"/>
            </h:selectOneRadio>
        </a4j:outputPanel>
    </td>
    <td colspan="2">
        <a4j:outputPanel id="answerLabelPanel">
            <table cellpadding="0" cellspacing="0">
                <a4j:repeat id="singleChoiceRepeat"
                            value="#{pageBean.questionDefinition.singleChoice.answer}"
                            var="answer"
                            rendered="#{pageBean.questionDefinition.singleChoice != null}">
                    <tr>
                        <td>
                            <h:inputText value="#{answer.value}" disabled="#{pageBean.viewMode}"/>
                        </td>
                    </tr>
                </a4j:repeat>
            </table>
        </a4j:outputPanel>
    </td>
    <td align="right">
        <a4j:commandButton id="addAnswerButton"
                           action="#{pageBean.addAnswer}"
                           reRender="correctAnswerPanel,answerLabelPanel"
                           styleClass="button"
                           value="+"
                           disabled="#{pageBean.viewMode}"/>
        <a4j:commandButton id="removeAnswerButton"
                           action="#{pageBean.removeAnswer}"
                           reRender="correctAnswerPanel,answerLabelPanel"
                           styleClass="button"
                           value="-"
                           disabled="#{pageBean.viewMode}"/>
    </td>
</tr>
</table>
</div>
</a4j:form>
</ui:define>
</ui:composition>
</html>
